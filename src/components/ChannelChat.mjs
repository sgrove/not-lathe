// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Curry from "rescript/lib/es6/curry.js";
import * as React from "react";
import * as $$String from "rescript/lib/es6/string.js";
import * as Belt_Option from "rescript/lib/es6/belt_Option.js";
import * as Belt_SortArray from "rescript/lib/es6/belt_SortArray.js";
import * as AudioStreamPlayer from "./AudioStreamPlayer.mjs";
import * as CollaborationContext from "./CollaborationContext.mjs";

function ChannelChat(Props) {
  var channelId = Props.channelId;
  var collaborationContext = React.useContext(CollaborationContext.context);
  var chatVisualizer = Belt_Option.mapWithDefault(Curry._1(collaborationContext.getSharedChannelState, channelId), [], (function (param) {
          var entries = Array.from(param[1].entries());
          return Belt_SortArray.stableSortBy(entries, (function (param, param$1) {
                          return $$String.compare(param[1].name, param$1[1].name);
                        })).map(function (param) {
                      var presence = param[1];
                      var match = presence.position;
                      var position = match !== undefined ? " (" + String(match.x | 0) + ", " + String(match.y | 0) + ")" : " No mouse";
                      return React.createElement("div", {
                                  key: param[0],
                                  className: " font-semibold text-sm font-mono inline-block flex-grow",
                                  style: {
                                    color: presence.color
                                  }
                                }, presence.name, position, " ", React.createElement(AudioStreamPlayer.make, {
                                      presence: presence
                                    }));
                    });
        }));
  return React.createElement("article", {
              className: "m-2 ",
              id: "channel-chat-" + channelId,
              disabled: true
            }, React.createElement("div", {
                  className: "flex flex-col justify-between cursor-pointer p-1 text-gray-200 "
                }, chatVisualizer));
}

var make = ChannelChat;

export {
  make ,
  
}
/* react Not a pure module */
